(function(){"use strict";function a(a){if(i[a])return i[a];var n=[0,0,0];return a.match(/^#/)?(a=(a||"").replace(/^#/,""),n=3===a.length?[parseInt(a.charAt(0)+a.charAt(0),16),parseInt(a.charAt(1)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(2),16)]:[parseInt(a.charAt(0)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(3),16),parseInt(a.charAt(4)+a.charAt(5),16)]):a.match(/^ *rgba? *\(/)&&(a=a.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),n=[+a[1],+a[2],+a[3]]),i[a]={r:n[0],g:n[1],b:n[2]},i[a]}function n(n,e,i){n=a(n),e=a(e);var r={r:n.r*(1-i)+e.r*i,g:n.g*(1-i)+e.g*i,b:n.b*(1-i)+e.b*i};return"rgb("+[0|r.r,0|r.g,0|r.b].join(",")+")"}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e=0,i={};sigma.plugins.animate=function(a,i,r){function t(){var e=(sigma.utils.dateNow()-f)/m;if(e>=1){s.forEach(function(a){for(var n in i)n in i&&(a[n]=a[i[n]])});var r,d;for(r in a.cameras)d=a.cameras[r],d.edgequadtree._enabled=!0;a.refresh(),"function"==typeof c.onComplete&&c.onComplete()}else e=u(e),s.forEach(function(a){for(var r in i)r in i&&(a[r]=r.match(/color$/)?n(o[a.id][r],a[i[r]],e):a[i[r]]*e+o[a.id][r]*(1-e))}),a.refresh(),a.animations[g]=requestAnimationFrame(t)}var s,o,c=r||{},g=++e,m=c.duration||a.settings("animationsTime"),u="string"==typeof c.easing?sigma.utils.easings[c.easing]:"function"==typeof c.easing?c.easing:sigma.utils.easings.quadraticInOut,f=sigma.utils.dateNow();s=c.nodes&&c.nodes.length?"object"==typeof c.nodes[0]?c.nodes:a.graph.nodes(c.nodes):a.graph.nodes(),o=s.reduce(function(a,n){var e;a[n.id]={};for(e in i)e in n&&(a[n.id][e]=n[e]);return a},{}),a.animations=a.animations||Object.create({}),sigma.plugins.kill(a);var d,l;for(d in a.cameras)l=a.cameras[d],l.edgequadtree._enabled=!1;t()},sigma.plugins.kill=function(a){for(var n in a.animations||{})cancelAnimationFrame(a.animations[n]);var n,e;for(n in a.cameras)e=a.cameras[n],e.edgequadtree._enabled=!0}}).call(window);