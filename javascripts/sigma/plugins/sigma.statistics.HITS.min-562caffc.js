(function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.classes.graph.addMethod("HITS",function(i){var r={},h=1e-4,t=[],d=[],a=this.nodes(),o=(a.length,{});i||(i=!1);for(var u in a)i?(t.push(a[u]),d.push(a[u])):(this.degree(a[u].id,"out")>0&&t.push(a[u]),this.degree(a[u].id,"in")>0&&d.push(a[u])),r[a[u].id]={authority:1,hub:1};for(var e;;){e=!0;var s=0,n=0;for(var u in d){o[d[u].id]={authority:1,hub:0};var b=[];b=i?this.allNeighborsIndex[d[u].id]:this.inNeighborsIndex[d[u].id];for(var f in b)f!=d[u].id&&(o[d[u].id].authority+=r[f].hub);s+=o[d[u].id].authority}for(var u in t){o[t[u].id]?o[t[u].id].hub=1:o[t[u].id]={authority:0,hub:1};var b=[];b=i?this.allNeighborsIndex[t[u].id]:this.outNeighborsIndex[t[u].id];for(var f in b)f!=t[u].id&&(o[t[u].id].hub+=r[f].authority);n+=o[t[u].id].hub}for(var u in d)o[d[u].id].authority/=s,Math.abs((o[d[u].id].authority-r[d[u].id].authority)/r[d[u].id].authority)>=h&&(e=!1);for(var u in t)o[t[u].id].hub/=n,Math.abs((o[t[u].id].hub-r[t[u].id].hub)/r[t[u].id].hub)>=h&&(e=!1);if(r=o,o={},e)break}return r})}).call(window);