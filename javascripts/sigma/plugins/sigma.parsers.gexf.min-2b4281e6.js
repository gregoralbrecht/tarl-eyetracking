(function(e){"use strict";function t(e){var t={id:e.id,label:e.label};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function i(e){var t={id:e.id,type:e.type||"undirected",label:e.label||"",source:e.source,target:e.target,weight:+e.weight||1};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function r(e){function r(){var e={};return d.els.meta?(e.lastmodifieddate=d.els.meta.getAttribute("lastmodifieddate"),s.nodeListEach(d.els.meta.childNodes,function(t){e[t.tagName.toLowerCase()]=t.textContent}),e):e}function n(e){var t=[];return d.els.model[e]&&s.nodeListEach(d.els.model[e],function(e){var i={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},r=s.nodeListToArray(e.childNodes);r.length>0&&(i.defaultValue=r[0].textContent),t.push(i)}),t.length>0?t:!1}function a(e,t){var i={},r=t.getElementsByTagName("attvalue"),n=s.nodeListToHash(r,function(e){var t=s.namedNodeMapToObject(e.attributes),i=t.id||t["for"];return{key:i,value:t.value}});return e.map(function(e){i[e.id]=!(e.id in n)&&"defaultValue"in e?s.enforceType(e.type,e.defaultValue):s.enforceType(e.type,n[e.id])}),i}function o(e){var i=[];return s.nodeListEach(d.els.nodes,function(r){var n={id:r.getAttribute("id"),label:r.getAttribute("label")||""};e&&(n.attributes=a(e,r)),d.hasViz&&(n.viz=u(r)),i.push(t(n))}),i}function u(e){var t={},i=s.getFirstElementByTagNS(e,"viz","color");if(i){var r=["r","g","b","a"].map(function(e){return i.getAttribute(e)});t.color=s.getRGB(r)}var n=s.getFirstElementByTagNS(e,"viz","position");n&&(t.position={},["x","y","z"].map(function(e){t.position[e]=+n.getAttribute(e)}));var a=s.getFirstElementByTagNS(e,"viz","size");a&&(t.size=+a.getAttribute("value"));var o=s.getFirstElementByTagNS(e,"viz","shape");return o&&(t.shape=o.getAttribute("value")),t}function g(e,t){var r=[];return s.nodeListEach(d.els.edges,function(n){var o=s.namedNodeMapToObject(n.attributes);"type"in o||(o.type=t),e&&(o.attributes=a(e,n)),d.hasViz&&(o.viz=l(n)),r.push(i(o))}),r}function l(e){var t={},i=s.getFirstElementByTagNS(e,"viz","color");if(i){var r=["r","g","b","a"].map(function(e){return i.getAttribute(e)});t.color=s.getRGB(r)}var n=s.getFirstElementByTagNS(e,"viz","shape");n&&(t.shape=n.getAttribute("value"));var a=s.getFirstElementByTagNS(e,"viz","thickness");return a&&(t.thickness=+a.getAttribute("value")),t}var d={};d.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:s.getModelTags(e)},d.hasViz=!!s.getAttributeNS(d.els.root,"xmlns","viz"),d.version=d.els.root.getAttribute("version")||"1.0",d.mode=d.els.graph.getAttribute("mode")||"static";var c=d.els.graph.getAttribute("defaultedgetype");d.defaultEdgetype=c||"undirected";var f=n("node"),v=n("edge"),p={version:d.version,mode:d.mode,defaultEdgeType:d.defaultEdgetype,meta:r(),model:{},nodes:o(f),edges:g(v,d.defaultEdgetype)};return f&&(p.model.node=f),v&&(p.model.edge=v),p}function n(e,t){var i=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(t in e)try{return new ActiveXObject(e[t])}catch(i){}}return null}();if(!i)throw"XMLHttpRequest not supported, cannot load the file.";var r,n="function"==typeof t;return i.overrideMimeType?(i.overrideMimeType("text/xml"),r=function(e){return e.responseXML}):r=function(e){var t=new DOMParser;return t.parseFromString(e.responseText,"application/xml")},i.open("GET",e,n),n&&(i.onreadystatechange=function(){4===i.readyState&&t(r(i))}),i.send(),n?i:r(i)}function a(e){return r(e)}function o(e,t){return"function"==typeof t?n(e,function(e){t(r(e))}):r(n(e))}var s={getModelTags:function(e){var t,i=e.getElementsByTagName("attributes"),r={},n=i.length;for(t=0;n>t;t++)r[i[t].getAttribute("class")]=i[t].childNodes;return r},nodeListToArray:function(e){for(var t=[],i=0,r=e.length;r>i;++i)"#text"!==e[i].nodeName&&t.push(e[i]);return t},nodeListEach:function(e,t){for(var i=0,r=e.length;r>i;++i)"#text"!==e[i].nodeName&&t(e[i])},nodeListToHash:function(e,t){for(var i={},r=0;r<e.length;r++)if("#text"!==e[r].nodeName){var n=t(e[r]);i[n.key]=n.value}return i},namedNodeMapToObject:function(e){for(var t={},i=0;i<e.length;i++)t[e[i].name]=e[i].value;return t},getFirstElementByTagNS:function(e,t,i){var r=e.getElementsByTagName(t+":"+i)[0];return r||(r=e.getElementsByTagNameNS(t,i)[0]),r||(r=e.getElementsByTagName(i)[0]),r},getAttributeNS:function(t,i,r){var n=t.getAttribute(i+":"+r);return n===e&&(n=t.getAttributeNS(i,r)),n===e&&(n=t.getAttribute(r)),n},enforceType:function(e,t){switch(e){case"boolean":t="true"===t;break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[]}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};if("undefined"!=typeof this.gexf)throw'gexf: error - a variable called "gexf" already exists in the global scope';this.gexf={parse:a,fetch:o,version:"0.1.1"},"undefined"!=typeof exports&&this.exports!==exports&&(module.exports=this.gexf)}).call(this),function(){"use strict";function e(){return"e"+t++}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers");var t=0;sigma.parsers.gexf=function(t,i,r){function n(t){for(s=t.nodes,a=0,o=s.length;o>a;a++)u=s[a],u.id=u.id,u.viz&&"object"==typeof u.viz&&(u.viz.position&&"object"==typeof u.viz.position&&(u.x=u.viz.position.x,u.y=-u.viz.position.y),u.size=u.viz.size,u.color=u.viz.color);for(s=t.edges,a=0,o=s.length;o>a;a++)u=s[a],u.id="string"==typeof u.id?u.id:e(),u.source=""+u.source,u.target=""+u.target,u.viz&&"object"==typeof u.viz&&(u.color=u.viz.color,u.size=u.viz.thickness),u.size=u.weight,u.direction=u.type,delete u.type;if(i instanceof sigma){for(i.graph.clear(),s=t.nodes,a=0,o=s.length;o>a;a++)i.graph.addNode(s[a]);for(s=t.edges,a=0,o=s.length;o>a;a++)i.graph.addEdge(s[a])}else"object"==typeof i?(i.graph=t,i=new sigma(i)):"function"==typeof i&&(r=i,i=null);return r?void r(i||t):t}var a,o,s,u;if("string"==typeof t)gexf.fetch(t,n);else if("object"==typeof t)return n(gexf.parse(t))}}.call(this);